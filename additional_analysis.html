<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2025-12-02" />

<title>Additional Analysis</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="data_wrangling.html">Data</a>
</li>
<li>
  <a href="eda.html">Exploratory Data Analysis</a>
</li>
<li>
  <a href="additional_analysis.html">Additional Analysis</a>
</li>
<li>
  <a href="conclusions.html">So what?</a>
</li>
<li>
  <a href="https://github.com/shivalikachavan/p8105_final">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Additional Analysis</h1>
<h4 class="date">2025-12-02</h4>

</div>


<pre class="r"><code>knitr::opts_chunk$set(echo = TRUE, collapse = TRUE)

library(tidyverse)
library(haven)
library(lubridate)
library(here)
library(patchwork)
library(epitools)
library(ggcorrplot)
library(patchwork)
library(plotly)

source(here(&quot;source&quot;, &quot;load_clean_brfss.R&quot;))
source(here(&quot;source&quot;, &quot;filter_brfss_data.R&quot;))
source(here(&quot;source&quot;, &quot;standardize_brfss_variable.R&quot;))
source(here(&quot;source&quot;, &quot;prop_test_functions.R&quot;))
source(here(&quot;source&quot;, &quot;run_fishers_test.R&quot;))

brfss_data = load_clean_brfss(here(&quot;data&quot;, &quot;brfss_clean_2017_2024.csv.zip&quot;))
state_fips = read_csv(here(&quot;data&quot;, &quot;legal_sports_report&quot;, &quot;state_fips.csv&quot;))

state_legal_dates = read_csv(here(&quot;data&quot;, &quot;legal_sports_report&quot;, &#39;state_legalization_dates.csv&#39;))
sb_rev_by_month = read_csv(here(&quot;data&quot;, &quot;legal_sports_report&quot;, &quot;sb_rev_by_month.csv&quot;))
sb_rev_by_state_month = read_csv(here(&quot;data&quot;, &quot;legal_sports_report&quot;,&#39;sb_rev_by_state_month.csv&#39;))
sb_rev_by_state = read_csv(here(&quot;data&quot;, &quot;legal_sports_report&quot;, &quot;sb_rev_by_state.csv&quot;))
state_pop = read_csv(here(&quot;data&quot;, &quot;state_population_census.csv&quot;))

years_in_data = unique(year(pull(sb_rev_by_month, month)))

outcome_vars = c(&quot;any_physical_health_not_good_days&quot;, &quot;any_mental_health_not_good_days&quot;, &quot;has_depressive_disorder&quot;, &quot;has_binge_drink&quot;)

theme_set(theme_minimal() + theme(legend.position = &quot;bottom&quot;))</code></pre>
<div id="additional-analysis" class="section level1">
<h1>Additional analysis</h1>
<p>To test the relationship between sports betting legalization and
health outcomes, we employed two statistical approaches: a proportion
test to compare the prevalence of adverse outcomes before and after the
legalization of sports betting, and a Fisher’s Exact Test to calculate
the Relative Risk (RR) of these outcomes in states where sports betting
is legal vs. states where it is illegal for the most recent data in
2024. We compared outcome rates in “exposed” (sports betting is legal)
and “unexposed” (sports betting is not legal) populations.</p>
<div id="prop-tests" class="section level2">
<h2>Prop Tests</h2>
<p>Our one-sided two sample proportion tests are examining whether there
is a significant change (baseline is lower) in the rates of the 4 health
outcomes. In the first test, for example, the null hypothesis is that
the rate of a particular outcome (e.g. binge drinking) is the same in
2017 and in 2024. The alternative is that the rate of binge drinking was
less in 2017 that it was in 2024.</p>
<p>These tests looks at the raw change over time, regardless of when
legalization occurred, providing a general benchmark. The lines show the
change, and the color indicates statistical significance.</p>
<pre class="r"><code>prop_tests_state = 
  brfss_data |&gt; 
  filter(year(date) %in% c(2017, 2024)) |&gt;
  select(state, date, all_of(outcome_vars)) |&gt;
  pivot_longer(
    cols = all_of(outcome_vars),
    names_to = &quot;outcome&quot;,
    values_to = &quot;outcome_value&quot; 
    ) |&gt;
  group_by(state, outcome) |&gt;
  nest() |&gt; 
  mutate(test_result = map(data, run_prop_test_state)) |&gt; 
  factor_significant()

combine_plots(prop_tests_state)</code></pre>
<p>The second test we wanted to run used each state’s specific
legalization date, <code>sb_legal</code>, as the inflection point. We
also repeated this test looking specifically at adults under 50 due to
their higher participation in sports betting.</p>
<p>According to <a
href="https://www.pewresearch.org/short-reads/2025/10/02/americans-increasingly-see-legal-sports-betting-as-a-bad-thing-for-society-and-sports/">PEW</a>
research, “Young adults are more likely than older Americans to say
they’ve placed a sports bet in the past year.”</p>
<pre class="r"><code>prop_tests_sb_legal = 
  brfss_data |&gt; 
  select(state, sb_legal, all_of(outcome_vars)) |&gt;
  pivot_longer(
    cols = all_of(outcome_vars),
    names_to = &quot;outcome&quot;,
    values_to = &quot;outcome_value&quot; 
    ) |&gt;
  group_by(state, outcome) |&gt;
  nest() |&gt; 
  mutate(test_result = map(data, run_prop_test_state_legalization)) |&gt; 
  factor_significant()

combine_plots(prop_tests_sb_legal)</code></pre>
<pre class="r"><code>prop_tests_sb_legal = 
  brfss_data |&gt; 
  filter(age_group_5yr %in% c(&quot;18-24&quot;, &quot;25-29&quot;, &quot;30-34&quot;, &quot;35-39&quot;, &quot;40-44&quot;, &quot;45-49&quot;)) |&gt; 
  select(state, sb_legal, all_of(outcome_vars)) |&gt;
  pivot_longer(
    cols = all_of(outcome_vars),
    names_to = &quot;outcome&quot;,
    values_to = &quot;outcome_value&quot; 
    ) |&gt;
  group_by(state, outcome) |&gt;
  nest() |&gt; 
  mutate(test_result = map(data, run_prop_test_state_legalization)) |&gt; 
  factor_significant()

combine_plots(prop_tests_sb_legal)</code></pre>
<div class="scroll-container">
<h3>
Benchmark
</h3>
<img src="additional_analysis_files/figure-html/prop_test_benchmark.png" alt="Benchmark">
<h3>
Sports Betting Legal
</h3>
<img src="additional_analysis_files/figure-html/prop_test_sb_legal.png" alt="Sports Betting Legal">
<h3>
Sports Betting Legal (Age &lt; 50)
</h3>
<p><img src="additional_analysis_files/figure-html/prop_test_sb_legal_age.png" alt="Sports Betting Legal (Age < 50)"></p>
</div>
<style>
/* CSS to create the scrollable gallery */
.scroll-container {
    /* Set the fixed height of the viewing window */
    max-height: 1000px; 
    /* This is the key: enables the vertical scroll bar */
    overflow-y: auto; 
    border: 1px solid #ddd;
    padding: 10px;
}

.scroll-container img {
    /* Ensures the image fills the container width */
    width: 100%; 
    height: auto;
    margin-bottom: 10px; 
}
</style>
</div>
<div id="fischers-exact-test" class="section level2">
<h2>Fischer’s exact test</h2>
<div
id="relative-risk-of-poor-mental-health-outcomes-in-legal-vs.-non-legal-states-in-2024"
class="section level4">
<h4>Relative Risk of Poor Mental Health Outcomes in Legal vs. Non-Legal
states in 2024</h4>
<p>In 2024, what is the risk of having poor mental health outcomes based
on state legalization?</p>
<p>Exposure: betting legalization</p>
<p>Outcomes: any_physical_health_not_good_days,
any_mental_health_not_good_days, has_depressive_disorder,
has_binge_drink</p>
<p>We opted to use a Fisher’s exact test in the event that one of the
counts happened to be small. The goal of this test is to determine if
there is a statistically significant association between status of
sports betting legalization and the presence of the 4 health
outcomes.</p>
<pre class="r"><code>phys_health_results = 
  brfss_data |&gt;
  filter(year(date) == 2024, age_group_5yr %in% c(&quot;18-24&quot;, &quot;25-29&quot;), !is.na(any_physical_health_not_good_days)) |&gt;
  select(sb_legal, any_physical_health_not_good_days) |&gt; 
  rename(outcome = any_physical_health_not_good_days) |&gt; 
  run_fishers_test()

phys_health_results |&gt; pull(summary) |&gt; knitr::kable()</code></pre>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr class="header">
<th align="left">sports_betting_legal</th>
<th align="right">outcome_FALSE</th>
<th align="right">outcome_TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">6578</td>
<td align="right">4186</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">15277</td>
<td align="right">10692</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>
ment_health_results = 
  brfss_data |&gt;
  filter(year(date) == 2024, age_group_5yr %in% c(&quot;18-24&quot;, &quot;25-29&quot;), !is.na(any_mental_health_not_good_days)) |&gt;
  select(sb_legal, any_mental_health_not_good_days) |&gt; 
  rename(outcome = any_mental_health_not_good_days) |&gt; 
  run_fishers_test()

ment_health_results |&gt; pull(summary) |&gt; knitr::kable()</code></pre>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr class="header">
<th align="left">sports_betting_legal</th>
<th align="right">outcome_FALSE</th>
<th align="right">outcome_TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">4357</td>
<td align="right">6384</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">9739</td>
<td align="right">16298</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>
depression_results = 
  brfss_data |&gt;
  filter(year(date) == 2024, age_group_5yr %in% c(&quot;18-24&quot;, &quot;25-29&quot;), !is.na(has_depressive_disorder)) |&gt;
  select(sb_legal, has_depressive_disorder) |&gt; 
  rename(outcome = has_depressive_disorder) |&gt; 
  run_fishers_test()

depression_results |&gt; pull(summary) |&gt; knitr::kable()</code></pre>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr class="header">
<th align="left">sports_betting_legal</th>
<th align="right">outcome_FALSE</th>
<th align="right">outcome_TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">8050</td>
<td align="right">2794</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">18989</td>
<td align="right">7211</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>
binge_drink_results = 
  brfss_data |&gt;
  filter(year(date) == 2024, age_group_5yr %in% c(&quot;18-24&quot;, &quot;25-29&quot;), !is.na(has_binge_drink)) |&gt;
  select(sb_legal, has_binge_drink) |&gt; 
  rename(outcome = has_binge_drink) |&gt; 
  run_fishers_test()

binge_drink_results |&gt; pull(summary) |&gt; knitr::kable()</code></pre>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr class="header">
<th align="left">sports_betting_legal</th>
<th align="right">outcome_FALSE</th>
<th align="right">outcome_TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">FALSE</td>
<td align="right">8474</td>
<td align="right">2278</td>
</tr>
<tr class="even">
<td align="left">TRUE</td>
<td align="right">19721</td>
<td align="right">6319</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="linear-regression" class="section level2">
<h2>Linear Regression</h2>
<div id="any-bad-mental-health-days" class="section level4">
<h4>Any bad mental health days</h4>
<pre class="r"><code>brfss_data = load_clean_brfss(here::here(&quot;data&quot;, &quot;brfss_clean_2017_2024.csv.zip&quot;)) |&gt; 
  mutate(
    month = lubridate::floor_date(date, unit = &quot;month&quot;)
 )
## Rows: 37 Columns: 6
## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (2): state, abbr
## dbl  (1): fips
## date (3): first_start, online, offline
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Multiple files in zip: reading &#39;brfss_clean_2017_2024.csv&#39;
## Rows: 2749477 Columns: 39
## ── Column specification ─────────────────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (2): imonth, iday
## dbl  (36): qstver, dispcode, state, seqno, iyear, sex, marital, educag, empl...
## date  (1): date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Filter age group &lt; 50 (and sports betting legal)</p>
<pre class="r"><code>brfss_age_data = brfss_data |&gt; 
  filter(
    age_group_5yr %in% 
      c(&quot;18-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;),
    sb_legal %in% c(0, 1))</code></pre>
<p>We used a linear regression model to look at the effect of legalized
sports betting on any bad mental health days, and the interaction
between sex and age.</p>
<pre class="r"><code>fit =  lm(any_mental_health_not_good_days ~ sex + age_group_5yr + sb_legal 
                             + sex * sb_legal 
                             + age_group_5yr * sb_legal, data = brfss_age_data) 
fit_result = fit |&gt; 
  broom::tidy() |&gt; 
  select(term, estimate, std.error, p.value)

fit_result |&gt; 
  knitr::kable(digits = 3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.658</td>
<td align="right">0.002</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">sexMale</td>
<td align="right">-0.140</td>
<td align="right">0.002</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">age_group_5yr25-29</td>
<td align="right">-0.067</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">age_group_5yr30-34</td>
<td align="right">-0.106</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">age_group_5yr35-39</td>
<td align="right">-0.135</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">age_group_5yr40-44</td>
<td align="right">-0.168</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">age_group_5yr45-49</td>
<td align="right">-0.183</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">sb_legal</td>
<td align="right">0.053</td>
<td align="right">0.003</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">sexMale:sb_legal</td>
<td align="right">0.002</td>
<td align="right">0.002</td>
<td align="right">0.425</td>
</tr>
<tr class="even">
<td align="left">age_group_5yr25-29:sb_legal</td>
<td align="right">0.031</td>
<td align="right">0.005</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">age_group_5yr30-34:sb_legal</td>
<td align="right">0.030</td>
<td align="right">0.004</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">age_group_5yr35-39:sb_legal</td>
<td align="right">0.022</td>
<td align="right">0.004</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">age_group_5yr40-44:sb_legal</td>
<td align="right">0.017</td>
<td align="right">0.004</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">age_group_5yr45-49:sb_legal</td>
<td align="right">0.002</td>
<td align="right">0.004</td>
<td align="right">0.651</td>
</tr>
</tbody>
</table>
</div>
<div id="predicted-probability-of-1-mentally-unhealthy-day"
class="section level4">
<h4>Predicted Probability of ≥1 Mentally Unhealthy Day</h4>
<pre class="r"><code># Build prediction grid
pred_df = expand.grid(
  sex = c(&quot;Female&quot;, &quot;Male&quot;),
  age_group_5yr = c(&quot;18-24&quot;,&quot;25-29&quot;,&quot;30-34&quot;,&quot;35-39&quot;,&quot;40-44&quot;,&quot;45-49&quot;),
  sb_legal = c(0, 1)   # illegal = 0, legal = 1
)

# Get predicted probabilities and plot
pred_df |&gt; 
  mutate(pred_prob = predict(fit, newdata = pred_df)) |&gt; 
  ggplot(aes(x = age_group_5yr, y = pred_prob,
                    color = interaction(sex, sb_legal),
                    group = interaction(sex, sb_legal),
                    linetype = factor(sb_legal))) +
  geom_line(size = 1.1) +
  scale_color_manual(
    name = &quot;&quot;,
    values = c(
      &quot;Female.0&quot; = &quot;#AA336A&quot;,  # orange solid
      &quot;Female.1&quot; = &quot;#DE3163&quot;,  # blue dashed
      &quot;Male.0&quot;   = &quot;#4682B4&quot;,  # green solid
      &quot;Male.1&quot;   = &quot;#0F52BA&quot;   # blue dashed
    ),
    labels = c(
      &quot;Female.0&quot; = &quot;Female - SB illegal&quot;,
      &quot;Female.1&quot; = &quot;Female - SB legal&quot;,
      &quot;Male.0&quot;   = &quot;Male - SB illegal&quot;,
      &quot;Male.1&quot;   = &quot;Male - SB legal&quot;
    )
  ) +
  scale_linetype_manual(
    name = &quot;&quot;,
    values = c(&quot;0&quot; = &quot;solid&quot;, &quot;1&quot; = &quot;dashed&quot;),
    labels = c(&quot;0&quot; = &quot;SB illegal&quot;, &quot;1&quot; = &quot;SB legal&quot;)
  ) +
  labs(
    x = &quot;Age Group&quot;,
    y = &quot;Predicted Probability&quot;,
    title = &quot;Predicted Probability of ≥1 Mentally Unhealthy Day&quot;,
    subtitle = &quot;Interaction: Age × Sex × Sports Betting Legalization&quot;
  ) +
  theme_minimal(base_size = 14) +
  theme(
    legend.position = &quot;right&quot;,
    axis.text.x = element_text(angle = 45, hjust = 1)
  )
## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
## ℹ Please use `linewidth` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<p><img src="additional_analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="discussion" class="section level1">
<h1>Discussion</h1>
<p>Overall, we found a significant relationship between legalization of
sports betting and poor physical/mental health. It is important to note
that in our statistical analyses, even if the effect size was small, we
still had a small p-value. This is likely due to the size of the BRFSS
dataset (~2.7 million observations).</p>
<p>Our tests of proportion, which first examined the overall trend in
the four health outcomes between 2017 and 2024, established two trends
at the national scale. First, there is a clear increase in the rate of
survey participants reporting at least one poor physical or mental
health day in almost all states. This is an important benchmark for
effects we observed later on. However, rates of depressive disorders
showed a slight increase and rates in binge drinking remained the same
across this period.</p>
<p>To isolate the impact of the change in sport betting legalization, we
performed additional tests of proportion using each state’s date of
legalization as the inflection point. These results largely mirrored the
overall trends observed nationally between 2017 and 2024. This implies
that the impact of sports betting legalization in a particular state did
not deviate from the broader trend observed over time. One important
note is that this period includes the COVID-19 pandemic, which likely
had effects on health outcomes in the US and overlaps with the dates
that several states legalized sports betting.</p>
<p>Knowing that more young adults participate in sports betting, we
further filtered the data for participants under 50 years old. In this
subset, the overall rate of mental health and depressive disorders was
higher than the general population. This makes sense intuitively.
However, the change in the rate after legalization was similar to the
overall change.</p>
<p>When put together, these tests of proportion suggest that health
outcomes have worsened since 2017 across the US overall. These results
do not show that sports betting legalization changes these trends beyond
what is observed temporally at the national level.</p>
<p>However, this conclusion is modified when we look at the relative
risk of adverse health outcomes in 2024:</p>
<p>Among BRFSS participants in 2024 between the ages of 18 and 29, those
who resided in states with legalized sports betting had:</p>
<ul>
<li>1.06x risk of having at least 1 day of poor physical health</li>
<li>1.05x risk of having at least 1 day of poor mental health</li>
<li>1.07x risk of having depression</li>
<li>1.15x risk of binge drinking</li>
</ul>
<p>compared to those residing in states where sports betting is not
legal. Each of these results also show that there is a statistically
significant relationship between the status of sports betting
legalization and health outcomes:</p>
<ul>
<li>At least 1 day of poor physical health: p = 5.08e-05</li>
<li>At least 1 day of poor mental health: p = 1.61e-08</li>
<li>Depression: p = 5.17e-04</li>
<li>Binge Drinking: p = 1.75e-10</li>
</ul>
<p>The regression model showed baseline differences in mental health
between sexes and age groups as well as the effects of legalized sports
gambling. Men have a 14.02 percentage point lower probability of
reporting ≥1 mentally unhealthy day compared to women (p &lt; 0.001).
All age coefficients are negative, meaning older groups report fewer
mentally unhealthy days than 18–24-year-olds, This matches known
demographic patterns typical in BRFSS mental health data.</p>
<p>The overall effect of sports betting legality (<code>sb_legal</code>)
was 0.053 p = 8.06e-55. In the reference group (female, age 18–24),
living in a state where sports betting is legal is associated with a
5.262 percentage point higher probability of reporting ≥1 mentally
unhealthy day in the past month.</p>
<p>There is no meaningful difference in the effect of sports betting
legalization between men and women. The coefficient is tiny (0.0019712)
and not statistically significant (p = 0.425.)</p>
<p>Each age interaction term tells us how much the effect of sports
betting legality differs from the reference group (18–24).</p>
<pre class="r"><code>fit_result |&gt; 
  filter(str_starts(term, &quot;age_group_&quot;) &amp; str_ends(term, &quot;sb_legal&quot;)) |&gt; 
  select(term, estimate, p.value) |&gt; 
  mutate(
    term = str_replace_all(term, c(&quot;age_group_5yr&quot;=&quot;&quot;, &quot;:sb_legal&quot;=&quot;&quot;))
  ) |&gt; 
  rename(&quot;Age Group&quot; = term) |&gt; 
  knitr::kable(digits=3)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Age Group</th>
<th align="right">estimate</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">25-29</td>
<td align="right">0.031</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">30-34</td>
<td align="right">0.030</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">35-39</td>
<td align="right">0.022</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">40-44</td>
<td align="right">0.017</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">45-49</td>
<td align="right">0.002</td>
<td align="right">0.651</td>
</tr>
</tbody>
</table>
<p>The effect is largest for adults 25-29 (0.0310474) and not
significant for adults 45-49. The impact of sports betting legalization
on mentally unhealthy days appears stronger for younger adults (25–44)
but then plateaus. This result can also be seen in the predicted
probabilty of having 1 or more bad mental health days.</p>
<p>The results showed how the predicted probability of reporting at
least one mentally unhealthy day in the past month varies across age
groups, sex, and whether sports betting is legal in the respondent’s
state. When sports betting is not legal, women consistently report
higher rates of mentally unhealthy days than men across all age groups.
Both sexes show a steady decline in mentally unhealthy days as age
increases, with 18–24-year-olds exhibiting the highest risk and
45–50-year-olds the lowest.</p>
<p>The effect of sports betting legalization is shown by the separation
between the dashed lines (SB legal) and the solid lines. Across all age
groups, the dashed lines lie above the corresponding solid lines, which
means sports betting legalization is associated with a higher
probability of reporting mentally unhealthy days. It also shows the size
of this increase varies by age and the difference is largest among young
and early-mid adults, especially ages 25–44.</p>
<p>The vertical distance between male and female lines remains fairly
constant regardless of legalization status, which indicates women
consistently report more mentally unhealthy days than men. The effect of
sports betting legalization is similar for both sexes (this supports the
non-significant sex × legalization interaction in the regression
model).</p>
<p>The graph visually confirms the pattern in the coefficients: among
younger adults (25–44), the increase associated with sports betting
legalization is noticeably larger and this decreases with age. This
suggests that younger and mid-age adults may be more sensitive to
environmental or policy changes related to gambling or these age groups
may participate more in gambling or be more exposed to advertising or
technology that connects them to sports betting markets.</p>
<p>Sports betting legalization is associated with a higher probability
of experiencing mentally unhealthy days, especially among adults aged
25–44, and this pattern is similar for both men and women. The effect
does not appear uniform across age groups, indicating a meaningful
interaction between age and policy.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
